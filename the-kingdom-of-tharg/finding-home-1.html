<!doctype html>
<html lang="en">
    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164357380-1"></script>
        <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'UA-164357380-1');
        </script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">        
        <title>A. Kuszyk | The Kingdom Of Tharg - Finding Home (1/5)</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <style>
            ul.timeline {
                list-style-type: none;
                position: relative;
            }
            ul.timeline:before {
                content: ' ';
                background: #d4d9df;
                display: inline-block;
                position: absolute;
                left: 29px;
                width: 2px;
                height: 100%;
                z-index: 400;
            }
            ul.timeline > li {
                margin: 20px 0;
                padding-left: 20px;
            }
            ul.timeline > li:before {
                content: ' ';
                background: white;
                display: inline-block;
                position: absolute;
                border-radius: 50%;
                border: 3px solid #22c0e8;
                left: 20px;
                width: 20px;
                height: 20px;
                z-index: 400;
            }
        </style>
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="col-lg">
                <h1>The Kingdom Of Tharg</h1>
<h2>Finding Home</h2>
<h3>Part 1/5

            <hr>
            </div>
            <div class="col-sm"></div>
        </div>
        <div class="row">
            <div class="col-sm"></div>
            <div class="col-lg">
                <p>Calir awoke frozen and hungry. He was surrounded by snow-covered rock, but he was laying in a wet patch where his body heat had turned the snow to slush. Aevum was sat next to him, huddled in his cloak like the bundle of rags that Calir had first taken him for. Sitting up, Calir looked around at the barren, icy landscape with despondency and wrapped his cloak around him even tighter.</p>
<p>"Where are we?" he called over the frigid wind that was blowing ice and snow around them.</p>
<p>"The ice continent" came the muffled reply.</p>
<p>"Where is Tharg's fortress? Which way to help Placor?" cried Calir with desperation in his voice from the cold as much as anything else.</p>
<p>"The Dark Mirror sends us where and when she pleases. All we can do now is try to get you beyond her power and perhaps find your homeland."</p>
<p>With this the mage stood up and gathered his cloak about him even closer.</p>
<p>"But what about my brother? My little brother? We can't just leave him in that hell-hole!"</p>
<p>"I do not know your brother, neither do I care to meet the men who held him captive. One thing is for sure. To stay here is to die. We must leave at once."</p>
<p>He extended his arm to a miserable Calir, who had buried his head in his hands. He looked up as Aevum proffered his hand and, taking a deep breath, reached out and let himself be pulled to his feet.</p>
<p>"Yes, well, it is what it is. We must make the most of what luck we have, but I will not abandon Placor! If we reach safety at Domum, I vow to return and search for him!"</p>

                <hr>
                <p style="text-align:center">
                    | 1 | <a href="finding-home-2.html">2</a> | <a href="finding-home-3.html">3</a> | <a href="finding-home-4.html">4</a> | <a href="finding-home-5.html">5</a> |
                    <br>
                    <a href="/the-kingdom-of-tharg/the-dark-mirror-1.html">Previous Chapter</a> | <a href="/the-kingdom-of-tharg/the-gelida-sea-1.html">Next Chapter</a>    
                </p>
            </div>
        </div>
        <div id="app" class="row">
            <div class="col-md-6 offset-md-3">
                <h4>Comments</h4>
                <ul class="timeline">
                    <li>
                        <form>
                            <div class="form-group">
                                <label for="commentInput">All comments are welcome, especially constructive ones!</label>
                                <textarea v-model="newComment" class="form-control" id="commentInput" rows="3"></textarea>
                                <button type="button" class="btn btn-primary" v-on:click="submitComment">Submit</button>
                            </div>
                        </form>
                    </li>
                    <li v-for="comment in comments">
                        <p><b>{{ comment.createdAt }}</b></p>
                        <p>{{ comment.body }}</p>
                    </li>
                </ul>
            </div>
        </div>
        <script>
        loadComments = function() {
            $.get('/topics/16275216/comments', function(data) {
                console.log(typeof(data))
                comments = []
                for(d of data) {
                    createdAt = new Date(d.CreatedAt)
                    comments.push({createdAt: `${createdAt.toLocaleString()}`, body: d.Body})
                }
                app.$data.comments = comments
            })
        }

        var app = new Vue({
            el: '#app',
            data: {
                newComment: '',
                comments: []
            },
            methods: {
                submitComment: function() {
                console.log(app.newComment)
                $.post(
                    {
                        url: '/topics/16275216/comments',
                        data: JSON.stringify({Body: app.newComment}), 
                        contentType: 'application/json'
                    }, 
                    function() {
                        loadComments()
                        app.newComment = ''
                    })
                }
            }
        })

        loadComments() 
        </script>
    </div>
    </body>
</html>
